{"version":3,"sources":["../src/BsMultiSelect.js"],"names":[],"mappings":"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","file":"BsMultiSelect.js","sourcesContent":["import {MultiSelect} from './MultiSelect'\r\nimport {LabelAdapter} from './LabelAdapter';\r\n\r\nimport {BsAppearancePlugin, getLabelElement, composeGetDisabled} from './BsAppearancePlugin';\r\nimport {ValidityApi} from './ValidityApi'\r\n\r\nimport {getDataGuardedWithPrefix, EventBinder, closestByTagName, getIsRtl} from './ToolsDom';\r\n\r\nimport {createCss, extendCss} from './ToolsStyling';\r\nimport {extendOverriding, extendIfUndefined, composeSync, ObservableValue, ObservableLambda, def, defCall, isBoolean} from './ToolsJs';\r\n\r\nimport {adjustLegacyConfiguration as adjustLegacySettings} from './BsMultiSelectDepricatedParameters'\r\n\r\nimport {pickContentGenerator as defPickContentGenerator} from './PickContentGenerator';\r\nimport {choiceContentGenerator as defChoiceContentGenerator} from './ChoiceContentGenerator';\r\nimport {staticContentGenerator  as defStaticContentGenerator} from './StaticContentGenerator';\r\nimport {css, cssPatch} from './BsCss'\r\n\r\nimport {HiddenPlugin} from './HiddenPlugin'\r\nimport {PluginManager} from './PluginManager'\r\n\r\nconst defValueMissingMessage = 'Please select an item in the list'\r\n\r\nexport const defaults = {\r\n    useCssPatch : true,\r\n    containerClass : \"dashboardcode-bsmultiselect\",\r\n    css: css,\r\n    cssPatch: cssPatch,\r\n    label: null,\r\n    placeholder: '',\r\n    staticContentGenerator : null, \r\n    pickContentGenerator: null, \r\n    choiceContentGenerator : null, \r\n    buildConfiguration: null,\r\n    isRtl: null,\r\n    getSelected: null,\r\n    setSelected: null,\r\n    required: null, /* null means look on select[required] or false if jso-source */\r\n    common: null,\r\n    options: null,\r\n    getIsOptionDisabled: null,\r\n    getIsOptionHidden: null,\r\n\r\n    getDisabled: null,\r\n    getSize: null,\r\n    getValidity: null,\r\n    \r\n    valueMissingMessage: '',\r\n    getIsValueMissing: null\r\n};\r\n\r\nfunction extendConfigurtion(configuration, defaults){\r\n    let cfgCss = configuration.css;\r\n    let cfgCssPatch = configuration.cssPatch;\r\n    configuration.css = null;\r\n    configuration.cssPatch = null;\r\n    extendIfUndefined(configuration, defaults); \r\n    var defCss = createCss(defaults.css, cfgCss); // replace classes, merge styles\r\n    if (defaults.cssPatch instanceof Boolean || typeof defaults.cssPatch ===\"boolean\" \r\n        || cfgCssPatch instanceof Boolean || typeof cfgCssPatch===\"boolean\" \r\n    )\r\n    throw new Error(\"BsMultiSelect: 'cssPatch' was used instead of 'useCssPatch'\") // often type of error\r\n    var defCssPatch = createCss(defaults.cssPatch, cfgCssPatch); // replace classes, merge styles\r\n    configuration.css = defCss;\r\n    configuration.cssPatch = defCssPatch;\r\n}\r\n\r\nexport function BsMultiSelect(element, environment, settings){\r\n    var {Popper, window} = environment;\r\n    var trigger = (eventName)=> environment.trigger(element, eventName);\r\n    if (typeof Popper === 'undefined') {\r\n        throw new Error(\"BsMultiSelect: Popper.js (https://popper.js.org) is required\")\r\n    }\r\n\r\n    let configuration = {};\r\n    let init = null;\r\n    if (settings instanceof Function){\r\n        extendConfigurtion(configuration, defaults);\r\n        init = settings(element, configuration);\r\n    }\r\n    else\r\n    { \r\n        if (settings){\r\n            adjustLegacySettings(settings);            \r\n            extendOverriding(configuration, settings); // settings used per jQuery intialization, configuration per element\r\n        }\r\n        extendConfigurtion(configuration, defaults);\r\n    }\r\n    \r\n    if (configuration.buildConfiguration)\r\n        init = configuration.buildConfiguration(element, configuration);\r\n    \r\n    let {\r\n        css, cssPatch, useCssPatch,\r\n        containerClass, label, isRtl, required,\r\n        getIsValueMissing, getSelected, setSelected, placeholder, \r\n        common,\r\n        options, getDisabled,\r\n        getIsOptionDisabled\r\n        } = configuration;\r\n\r\n    if (useCssPatch){\r\n        extendCss(css, cssPatch); \r\n    }\r\n    \r\n    let staticContentGenerator = def(configuration.staticContentGenerator, defStaticContentGenerator);\r\n    let pickContentGenerator = def(configuration.pickContentGenerator, defPickContentGenerator);\r\n    let choiceContentGenerator = def(configuration.choiceContentGenerator, defChoiceContentGenerator);\r\n\r\n    let valueMissingMessage = defCall(configuration.valueMissingMessage,\r\n        ()=> getDataGuardedWithPrefix(element,\"bsmultiselect\",\"value-missing-message\"),\r\n        defValueMissingMessage)\r\n\r\n    let forceRtlOnContainer = false; \r\n    if (isBoolean(isRtl))\r\n        forceRtlOnContainer = true;\r\n    else\r\n        isRtl = getIsRtl(element);\r\n\r\n    let staticContent = staticContentGenerator(\r\n        element, name=>window.document.createElement(name), containerClass, forceRtlOnContainer, css\r\n    );\r\n    \r\n    required = def(required, staticContent.required);\r\n\r\n    let lazyDefinedEvent;\r\n\r\n    let onChange;\r\n    let getOptions;\r\n    \r\n    if (options){\r\n        if (!getDisabled)\r\n            getDisabled = () => false;\r\n        getOptions = () => options,\r\n        onChange = () => {\r\n            lazyDefinedEvent()\r\n            trigger('dashboardcode.multiselect:change')\r\n        }\r\n        \r\n        if (!getIsOptionDisabled)\r\n            getIsOptionDisabled = (option)=>(option.disabled===undefined)?false:option.disabled;\r\n    } \r\n    else  \r\n    {\r\n        let selectElement = staticContent.selectElement;\r\n        if(!getDisabled) \r\n            getDisabled = composeGetDisabled(selectElement);\r\n\r\n\r\n        getOptions = ()=>selectElement.options, //.getElementsByTagName('OPTION'), \r\n        onChange = () => {\r\n            lazyDefinedEvent()\r\n            trigger('change')\r\n            trigger('dashboardcode.multiselect:change')\r\n        }\r\n\r\n        if (!getIsOptionDisabled)\r\n            getIsOptionDisabled = (option)=>option.disabled;\r\n    }\r\n\r\n    if (!getIsValueMissing){\r\n        getIsValueMissing = () => {\r\n            let count = 0;\r\n            let optionsArray = getOptions();\r\n            for (var i=0; i < optionsArray.length; i++) {\r\n                if (optionsArray[i].selected) \r\n                    count++;\r\n            }\r\n            return count===0;\r\n        }\r\n    }\r\n    var isValueMissingObservable = ObservableLambda(()=>required && getIsValueMissing());\r\n    var validationApiObservable = ObservableValue(!isValueMissingObservable.getValue())\r\n    lazyDefinedEvent = () => isValueMissingObservable.call();\r\n\r\n    let labelElement = defCall(label);\r\n    if (!labelElement) \r\n        labelElement=getLabelElement(staticContent.selectElement); \r\n    let labelAdapter = LabelAdapter(labelElement, staticContent.createInputId);\r\n\r\n    if (!placeholder){\r\n        placeholder = getDataGuardedWithPrefix(element,\"bsmultiselect\",\"placeholder\");\r\n    }\r\n    if (!getSelected){\r\n        getSelected = (option) => option.selected;\r\n    }\r\n    if (!setSelected){\r\n        setSelected = (option, value) => {option.selected = value};\r\n        // NOTE: adding this break Chrome's form reset functionality\r\n        // if (value) option.setAttribute('selected','');\r\n        // else  option.removeAttribute('selected');\r\n    }\r\n\r\n    var validationApi = ValidityApi(\r\n        staticContent.filterInputElement, \r\n        isValueMissingObservable, \r\n        valueMissingMessage,\r\n        (isValid)=>validationApiObservable.setValue(isValid));\r\n\r\n    \r\n    if (!common){\r\n        common = {}\r\n    }\r\n    common.getDisabled=getDisabled;\r\n\r\n    var multiSelect = new MultiSelect(\r\n        getOptions,\r\n        getDisabled,\r\n        setSelected,\r\n        getSelected,\r\n        getIsOptionDisabled,\r\n        staticContent,\r\n        (pickElement) => pickContentGenerator(pickElement, common, css),\r\n        (choiceElement, toggle) => choiceContentGenerator(choiceElement, common, css, toggle),\r\n        labelAdapter,\r\n        placeholder,\r\n        isRtl,\r\n        onChange,\r\n        css,\r\n        Popper,\r\n        window);\r\n\r\n    let plugins = [];\r\n    plugins.push(\r\n        HiddenPlugin(configuration, options, common, staticContent));\r\n    plugins.push(\r\n        BsAppearancePlugin(\r\n            configuration, options,  common, staticContent, \r\n            validationApiObservable,\r\n            css, useCssPatch));\r\n\r\n    let pluginManager = PluginManager(plugins);\r\n    pluginManager.afterConstructor(multiSelect);\r\n\r\n    var resetDispose=null;\r\n    if (staticContent.selectElement){\r\n         var form = closestByTagName(staticContent.selectElement, 'FORM');\r\n         if (form) {\r\n             var eventBuilder = EventBinder();\r\n             eventBuilder.bind(form, \r\n                     'reset', \r\n                     () => window.setTimeout( ()=>multiSelect.UpdateData() ) );\r\n             resetDispose = ()=>eventBuilder.unbind();\r\n         }\r\n    }\r\n            \r\n    multiSelect.Dispose = composeSync(multiSelect.Dispose.bind(multiSelect), \r\n        isValueMissingObservable.detachAll, validationApiObservable.detachAll, resetDispose);\r\n    multiSelect.validationApi = validationApi;\r\n    \r\n    if (init && init instanceof Function)\r\n        init(multiSelect);\r\n   \r\n    multiSelect.init();\r\n    pluginManager.afterInit(multiSelect);\r\n    multiSelect.load();\r\n    pluginManager.afterLoad(multiSelect);\r\n\r\n    // support browser's \"step backward\" on form restore\r\n    if (staticContent.selectElement && window.document.readyState !=\"complete\"){\r\n        window.setTimeout( function(){multiSelect.UpdateOptionsSelected()});\r\n    }\r\n\r\n    return multiSelect;\r\n}"]}